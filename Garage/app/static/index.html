<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Garage - Aventura no Vale do Silicio</title>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

    <!-- ========== SCREEN: LOGIN ========== -->
    <div id="screen-login" class="screen active">
        <div class="auth-bg">
            <img src="/static/login_bg.png" alt="Garage Characters" class="auth-bg-img">
            <div class="auth-bg-overlay"></div>
        </div>
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-logo">[<span>GARAGE</span>]</div>
                <p class="auth-subtitle">Faca login para iniciar sua jornada</p>
                <form id="loginForm" autocomplete="off">
                    <div class="auth-field">
                        <label for="loginUsername">Usuario</label>
                        <input type="text" id="loginUsername" placeholder="Seu nome de usuario" required
                            autocomplete="username">
                    </div>
                    <div class="auth-field">
                        <label for="loginPassword">Senha</label>
                        <input type="password" id="loginPassword" placeholder="Sua senha" required
                            autocomplete="current-password">
                    </div>
                    <div id="loginError" class="auth-error" hidden></div>
                    <button type="submit" class="auth-btn auth-btn-primary">ENTRAR</button>
                </form>
                <div class="auth-switch">
                    Nao tem conta? <a href="#" id="goToRegister">Cadastre-se</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== SCREEN: REGISTER ========== -->
    <div id="screen-register" class="screen">
        <div class="auth-bg">
            <img src="/static/login_bg.png" alt="Garage Characters" class="auth-bg-img">
            <div class="auth-bg-overlay"></div>
        </div>
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-logo">[<span>GARAGE</span>]</div>
                <p class="auth-subtitle">Crie sua conta e entre no Vale do Silicio</p>
                <form id="registerForm" autocomplete="off">
                    <div class="auth-field">
                        <label for="regFullName">Nome Completo</label>
                        <input type="text" id="regFullName" placeholder="Ex: Ada Lovelace" required minlength="3"
                            maxlength="100">
                    </div>
                    <div class="auth-field">
                        <label for="regUsername">Nome de Usuario</label>
                        <input type="text" id="regUsername" placeholder="Ex: ada_dev" required minlength="3"
                            maxlength="30" autocomplete="username">
                    </div>
                    <div class="auth-field">
                        <label for="regEmail">Email</label>
                        <input type="email" id="regEmail" placeholder="seu@email.com" required>
                    </div>
                    <div class="auth-field">
                        <label for="regWhatsapp">WhatsApp</label>
                        <input type="tel" id="regWhatsapp" placeholder="(11) 99999-9999" required minlength="10"
                            maxlength="20">
                    </div>
                    <div class="auth-field">
                        <label for="regProfession">Profissao</label>
                        <select id="regProfession" required>
                            <option value="" disabled selected>Selecione</option>
                            <option value="autonomo">Autonomo</option>
                            <option value="estudante">Estudante</option>
                            <option value="empresario">Empresario</option>
                        </select>
                    </div>
                    <div class="auth-field">
                        <label for="regPassword">Senha</label>
                        <input type="password" id="regPassword" placeholder="Minimo 6 caracteres" required minlength="6"
                            maxlength="128" autocomplete="new-password">
                    </div>
                    <div class="auth-field">
                        <label for="regPasswordConfirm">Confirmar Senha</label>
                        <input type="password" id="regPasswordConfirm" placeholder="Repita a senha" required
                            minlength="6" maxlength="128" autocomplete="new-password">
                    </div>
                    <div id="registerError" class="auth-error" hidden></div>
                    <div id="registerSuccess" class="auth-success" hidden></div>
                    <button type="submit" class="auth-btn auth-btn-primary">CADASTRAR</button>
                </form>
                <div class="auth-switch">
                    Ja tem conta? <a href="#" id="goToLogin">Fazer login</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== SCREEN: TITLE (ARCADE RETRO) ========== -->
    <div id="screen-title" class="screen">
        <div class="arcade-scanlines"></div>
        <div class="arcade-container">
            <div class="arcade-content">
                <div class="arcade-top-text">- AVENTURA NO VALE DO SILICIO -</div>
                <div class="arcade-logo"><span class="arcade-logo-bracket">[</span>GARAGE<span
                        class="arcade-logo-bracket">]</span></div>
                <div class="arcade-tagline">&lt;/&gt; TODA BIG TECH TEM UM INICIO &lt;/&gt;</div>
                <div class="arcade-divider">════════════════════════</div>
                <div class="arcade-description">
                    DE HELLO WORLD A ENGENHEIRO DISTINTO<br>
                    CORRA PELO VALE DO SILICIO . ENCONTRE MENTORES . RESOLVA DESAFIOS
                </div>
                <div class="arcade-insert blink">&gt;&gt;&gt; PRESSIONE START &lt;&lt;&lt;</div>
                <button class="arcade-btn" onclick="SFX.menuConfirm(); UI.showScreen('screen-onboarding')">
                    <span class="arcade-btn-icon">&#9654;</span> 1 JOGADOR INICIAR
                </button>
                <button class="arcade-btn arcade-btn-logout" onclick="Auth.logout()">
                    SAIR
                </button>
                <div class="arcade-credits">
                    <div>RECORDE ............. 999999</div>
                    <div>CREDITO(S) .......... 1</div>
                </div>
            </div>
            <div class="arcade-footer">
                DESENVOLVIDO POR BIO CODE TECHNOLOGY<br>
                ENGENHARIA DE SOFTWARE - TODOS OS DIREITOS RESERVADOS 2026<br>
                GARAGE - TECNOLOGIA NA QUEBRADA
            </div>
        </div>
    </div>

    <!-- ========== SCREEN: ONBOARDING ========== -->
    <div id="screen-onboarding" class="screen">
        <div class="onboarding-panel">
            <h2>CRIAR PERSONAGEM</h2>
            <p class="subtitle">Defina sua identidade para entrar no Vale do Silicio.</p>

            <label>1. SEU PERSONAGEM</label>
            <div class="avatar-selection" id="avatarSelection">
                <div class="avatar-card selected" data-avatar="boy" onclick="UI.selectAvatar(this)">
                    <canvas id="onboardingCharBoy" width="96" height="160"></canvas>
                    <span class="avatar-card-name">Dev Boy</span>
                </div>
                <div class="avatar-card" data-avatar="girl" onclick="UI.selectAvatar(this)">
                    <canvas id="onboardingCharGirl" width="96" height="160"></canvas>
                    <span class="avatar-card-name">Dev Girl</span>
                </div>
            </div>

            <label>2. SEU NOME</label>
            <input type="text" id="playerName" placeholder="Ex: Ada Lovelace" maxlength="50">

            <label>3. LINGUAGEM BACKEND</label>
            <p class="hint">Define o contexto dos desafios. Nao altera dificuldade.</p>
            <select id="playerLang">
                <option value="Java">Java</option>
                <option value="Python">Python</option>
                <option value="C">C</option>
                <option value="C++">C++</option>
                <option value="C#">C#</option>
                <option value=".NET">.NET</option>
                <option value="Ruby">Ruby</option>
                <option value="Rust">Rust</option>
                <option value="Go">Go</option>
            </select>

            <button class="btn-primary" onclick="Game.start()">ENTRAR NO VALE</button>
        </div>
    </div>

    <!-- ========== SCREEN: GAME WORLD (2D Canvas) ========== -->
    <div id="screen-world" class="screen">
        <!-- HUD (Arcade Retro) -->
        <div class="hud" id="worldHUD">
            <div class="hud-block">
                <span class="hud-icon">&#9733;</span>
                <div>
                    <div class="hud-label">JOGADOR</div>
                    <div class="hud-value" id="hudName">---</div>
                </div>
            </div>
            <div class="hud-sep">|</div>
            <div class="hud-block">
                <span class="hud-icon">&#9670;</span>
                <div>
                    <div class="hud-label">CARGO</div>
                    <div class="hud-value hud-stage" id="hudStage">Estagiario</div>
                </div>
            </div>
            <div class="hud-sep">|</div>
            <div class="hud-block">
                <span class="hud-icon">&#9679;</span>
                <div>
                    <div class="hud-label">PONTOS</div>
                    <div class="hud-value hud-score" id="hudScore">0</div>
                </div>
            </div>
            <div class="hud-sep">|</div>
            <div class="hud-block">
                <span class="hud-icon hud-icon-red">&#9829;</span>
                <div>
                    <div class="hud-label">VIDAS</div>
                    <div class="hud-value hud-errors" id="hudErrors">0 / 3</div>
                </div>
            </div>
            <div class="hud-sep">|</div>
            <div class="hud-block">
                <span class="hud-icon hud-icon-book">&#9776;</span>
                <div>
                    <div class="hud-label">LIVROS</div>
                    <div class="hud-value hud-books" id="hudBooks">0 / 16</div>
                </div>
            </div>
        </div>

        <!-- Canvas -->
        <canvas id="gameCanvas"></canvas>

        <!-- Interaction Hint -->
        <div id="interactHint" class="interact-hint">
            <span class="key-cap">ENTER</span> <span id="interactText">APRENDER</span>
        </div>

        <!-- Mobile Controls (D-Pad left, Actions right) -->
        <div class="mobile-controls">
            <div class="mobile-left">
                <button class="ctrl-btn" id="btnLeft" aria-label="Mover esquerda">&#9664;</button>
                <button class="ctrl-btn" id="btnRight" aria-label="Mover direita">&#9654;</button>
            </div>
            <div class="mobile-right">
                <button class="ctrl-btn ctrl-jump" id="btnJump" aria-label="Pular">PULAR</button>
                <button class="ctrl-btn ctrl-action action" id="btnAction" aria-label="Acao">APRENDER</button>
            </div>
        </div>
    </div>

    <!-- ========== DIALOG BOX ========== -->
    <div id="dialogBox" class="dialog-box">
        <div class="dialog-header">
            <div class="dialog-avatar" id="dAvatar"></div>
            <div>
                <div id="dName" class="dialog-name">MENTOR</div>
                <div id="dRole" class="dialog-role">ENGENHEIRO</div>
            </div>
        </div>
        <div id="dContent" class="dialog-content"></div>
        <div class="dialog-actions">
            <button class="btn-dialog" onclick="World.closeDialog()">CONTINUAR</button>
        </div>
    </div>

    <!-- ========== CHALLENGE OVERLAY ========== -->
    <div id="challengeOverlay" class="challenge-overlay">
        <div class="challenge-panel">
            <div class="challenge-header">
                <div class="challenge-mentor" id="challengeMentor">THE CRAFTSMAN</div>
                <div class="challenge-title" id="challengeTitle">---</div>
                <div class="challenge-region" id="challengeRegion">Apple Garage</div>
            </div>
            <div class="challenge-body">
                <div class="challenge-description" id="challengeDesc">---</div>
                <pre class="challenge-code" id="challengeCode"></pre>
            </div>
            <div class="challenge-options" id="challengeOptions"></div>
            <div class="challenge-feedback" id="challengeFeedback"></div>
            <div class="challenge-actions" id="challengeActions" style="display:none;">
                <button class="btn-primary" onclick="Game.nextChallenge()">CONTINUAR</button>
                <button class="btn-secondary" onclick="Game.returnToWorld()">VOLTAR AO MUNDO</button>
            </div>
        </div>
    </div>

    <!-- ========== SCREEN: GAME OVER ========== -->
    <div id="screen-gameover" class="screen">
        <div class="gameover-panel">
            <h1>FIM DE JOGO</h1>
            <p>3 erros atingidos. Retornando ao inicio do estagio atual.</p>
            <p>Seu historico de aprendizado foi preservado.</p>
            <div class="gameover-stats" id="gameoverStats"></div>
            <button class="btn-primary" onclick="Game.recover()">TENTAR NOVAMENTE</button>
        </div>
    </div>

    <!-- ========== SCREEN: VICTORY ========== -->
    <div id="screen-victory" class="screen">
        <div class="victory-panel">
            <h1>ENGENHEIRO DISTINTO</h1>
            <p>Voce se tornou alguem capaz de construir software que nao quebra quando o mundo muda.</p>
            <div class="victory-stats" id="victoryStats"></div>
            <button class="btn-secondary" onclick="location.reload()">MENU PRINCIPAL</button>
        </div>
    </div>

    <!-- ========== PROMOTION ========== -->
    <div id="promotionOverlay" class="promotion-overlay" style="display:none;">
        <div class="promotion-card">
            <h2>PROMOCAO</h2>
            <p id="promotionMessage"></p>
            <p class="promotion-stage" id="promotionStage"></p>
            <button class="btn-primary" onclick="UI.hidePromotion()">CONTINUAR</button>
        </div>
    </div>

    <!-- ========== BOOK POPUP ========== -->
    <div id="bookPopup" class="book-popup">
        <div class="book-popup-card">
            <div class="book-icon-large">&#128214;</div>
            <h3 id="bookTitle" class="book-popup-title">---</h3>
            <p id="bookAuthor" class="book-popup-author">---</p>
            <p id="bookSummary" class="book-popup-summary">---</p>
            <p id="bookLesson" class="book-popup-lesson">---</p>
            <button class="btn-primary" onclick="World.closeBookPopup()">CONTINUAR</button>
        </div>
    </div>

    <!-- ========== IDE CODING CHALLENGE ========== -->
    <div id="ideOverlay" class="ide-overlay">
        <div class="ide-container">
            <!-- IDE Top Bar -->
            <div class="ide-topbar">
                <div class="ide-topbar-dots">
                    <span class="ide-dot ide-dot-red"></span>
                    <span class="ide-dot ide-dot-yellow"></span>
                    <span class="ide-dot ide-dot-green"></span>
                </div>
                <div class="ide-topbar-title" id="ideFileName">Main.java</div>
                <div class="ide-topbar-right">
                    <span class="ide-stage-badge" id="ideStage">INTERN</span>
                </div>
            </div>

            <!-- IDE Main Area -->
            <div class="ide-main">
                <!-- Sidebar: file tree -->
                <div class="ide-sidebar">
                    <div class="ide-sidebar-header">EXPLORADOR</div>
                    <div class="ide-file active" id="ideSideFile">
                        <span class="ide-file-icon">&#9658;</span>
                        <span id="ideSideFileName">Main.java</span>
                    </div>
                    <div class="ide-sidebar-section">DESAFIO</div>
                    <div class="ide-challenge-info">
                        <div class="ide-challenge-title" id="ideChallengeTitle">Hello World</div>
                        <div class="ide-challenge-desc" id="ideChallengeDesc">---</div>
                    </div>
                    <div class="ide-sidebar-section">CONCEITO</div>
                    <div class="ide-concept-tag" id="ideConceptTag">Syntax</div>
                </div>

                <!-- Code Editor -->
                <div class="ide-editor-area">
                    <!-- Line numbers + code input -->
                    <div class="ide-editor">
                        <div class="ide-line-numbers" id="ideLineNumbers">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                            <span>6</span><span>7</span><span>8</span><span>9</span><span>10</span>
                        </div>
                        <textarea class="ide-code-input" id="ideCodeInput" spellcheck="false" autocomplete="off"
                            autocorrect="off" autocapitalize="off" enterkeyhint="done" inputmode="text"></textarea>
                    </div>

                    <!-- Terminal output -->
                    <div class="ide-terminal">
                        <div class="ide-terminal-header">
                            <span>TERMINAL</span>
                            <span class="ide-terminal-status" id="ideTermStatus">Pronto</span>
                        </div>
                        <div class="ide-terminal-output" id="ideTermOutput">
                            <span class="ide-prompt">&gt;</span> Aguardando codigo...
                        </div>
                    </div>
                </div>
            </div>

            <!-- IDE Bottom Bar: Characters + Actions -->
            <div class="ide-bottombar">
                <!-- Player character (left) -->
                <div class="ide-char ide-char-left">
                    <canvas id="idePlayerCanvas" width="48" height="80"></canvas>
                    <div class="ide-char-name" id="idePlayerName">JOGADOR</div>
                </div>

                <!-- Action buttons (center) -->
                <div class="ide-actions">
                    <button class="ide-btn ide-btn-run" id="ideRunBtn" onclick="IDE.runCode()">
                        <span class="ide-btn-icon">&#9654;</span> EXECUTAR
                    </button>
                    <button class="ide-btn ide-btn-help" id="ideHelpBtn" onclick="IDE.askHelp()">
                        <span class="ide-btn-icon">&#128273;</span> VER SOLUCAO
                    </button>
                    <button class="ide-btn ide-btn-skip" onclick="IDE.skip()" id="ideSkipBtn" style="display:none;">
                        <span class="ide-btn-icon">&#9654;&#9654;</span> PULAR
                    </button>
                </div>

                <!-- NPC mentor (right) -->
                <div class="ide-char ide-char-right">
                    <canvas id="ideMentorCanvas" width="48" height="80"></canvas>
                    <div class="ide-char-name" id="ideMentorName">MENTOR</div>
                </div>
            </div>
        </div>

        <!-- Help overlay (inside IDE) -->
        <div class="ide-help-overlay" id="ideHelpOverlay" style="display:none;">
            <div class="ide-help-card">
                <div class="ide-help-header">
                    <span class="ide-help-icon">&#128273;</span>
                    <span class="ide-help-mentor" id="ideHelpMentor">Robert C. Martin</span>
                </div>
                <div class="ide-help-content" id="ideHelpContent">---</div>
                <button class="ide-btn ide-btn-run" onclick="IDE.closeHelp()">ENTENDI, VOU COPIAR</button>
            </div>
        </div>
    </div>

    <script src="/static/game.js"></script>
</body>

</html>
